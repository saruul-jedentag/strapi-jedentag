"use strict";(self.webpackChunkbackend_jedentag=self.webpackChunkbackend_jedentag||[]).push([[8826],{41995:(Q,y,t)=>{t.d(y,{Z:()=>M});var e=t(67294),a=t(72955);const M=()=>{const{changeLocale:v,localeNames:A,messages:w}=(0,e.useContext)(a.Z);return{changeLocale:v,localeNames:A,messages:w}}},68890:(Q,y,t)=>{t.d(y,{Z:()=>A});var e=t(67294),a=t(88972),R=t(72986);const M=a.ZP.img`
  height: ${72/16}rem;
`,A=()=>{const{logos:{auth:w}}=(0,R.um)();return e.createElement(M,{src:w?.custom??w.default,"aria-hidden":!0,alt:""})}},50745:(Q,y,t)=>{t.d(y,{sg:()=>ae,bU:()=>z,ZP:()=>se});var e=t(67294),a=t(41580),R=t(11047),M=t(45697),v=t.n(M),A=t(88972),w=t(70642),te=t(86896),F=t(41995);const u=()=>{const{changeLocale:i,localeNames:q}=(0,F.Z)(),{locale:J}=(0,te.Z)();return e.createElement(w.q4,{value:J,onChange:n=>i(n)},Object.entries(q).map(([n,S])=>e.createElement(w.ag,{key:n,value:n},S)))},j=(0,A.ZP)(a.x)`
  margin: 0 auto;
  width: 552px;
`,ae=(0,A.ZP)(R.k)`
  flex-direction: column;
`,z=({children:i})=>e.createElement(j,{shadow:"tableShadow",hasRadius:!0,paddingTop:9,paddingBottom:9,paddingLeft:10,paddingRight:10,background:"neutral0",justifyContent:"center"},i);z.propTypes={children:v().node.isRequired};const G=({children:i})=>e.createElement("div",null,e.createElement(R.k,{as:"header",justifyContent:"flex-end"},e.createElement(a.x,{paddingTop:6,paddingRight:8},e.createElement(u,null))),e.createElement(a.x,{paddingTop:2,paddingBottom:11},i));G.propTypes={children:v().node.isRequired};const se=G},91458:(Q,y,t)=>{t.d(y,{Z:()=>M});var e=t(25752),a=t(88972);const M=(0,a.ZP)(e.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:v})=>v.colors.neutral600};
    }
  }
`},31640:(Q,y,t)=>{t.d(y,{Z:()=>I});var e=t(67294),a=t(16364),R=t(185),M=t(41580),v=t(75515),A=t(11047),w=t(36213),te=t(29728),F=t(57993),ie=t(8934),u=t(94123),j=t(41054),ae=t(45697),z=t.n(ae),G=t(86896),se=t(88972),i=t(68890),q=t(50745),J=t(91458);const n=(0,se.ZP)(a.o)`
  ::-ms-reveal {
    display: none;
  }
`,S=({onSubmit:T,schema:L,children:N})=>{const[k,ne]=(0,e.useState)(!1),{formatMessage:g}=(0,G.Z)();return e.createElement(R.o,null,e.createElement(q.bU,null,e.createElement(j.J9,{enableReinitialize:!0,initialValues:{email:"",password:"",rememberMe:!1},onSubmit:T,validationSchema:L,validateOnChange:!1},({values:H,errors:b,handleChange:oe})=>e.createElement(F.l0,{noValidate:!0},e.createElement(q.sg,null,e.createElement(i.Z,null),e.createElement(M.x,{paddingTop:6,paddingBottom:1},e.createElement(v.Z,{variant:"alpha",as:"h1"},g({id:"Auth.form.welcome.title",defaultMessage:"Welcome!"}))),e.createElement(M.x,{paddingBottom:7},e.createElement(v.Z,{variant:"epsilon",textColor:"neutral600"},g({id:"Auth.form.welcome.subtitle",defaultMessage:"Log in to your Strapi account"}))),b.errorMessage&&e.createElement(v.Z,{id:"global-form-error",role:"alert",tabIndex:-1,textColor:"danger600"},b.errorMessage)),e.createElement(A.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(a.o,{error:b.email?g({id:b.email,defaultMessage:"This value is required."}):"",value:H.email,onChange:oe,label:g({id:"Auth.form.email.label",defaultMessage:"Email"}),placeholder:g({id:"Auth.form.email.placeholder",defaultMessage:"kai@doe.com"}),name:"email",required:!0}),e.createElement(n,{error:b.password?g({id:b.password,defaultMessage:"This value is required."}):"",onChange:oe,value:H.password,label:g({id:"global.password",defaultMessage:"Password"}),name:"password",type:k?"text":"password",endAction:e.createElement(J.Z,{onClick:de=>{de.stopPropagation(),ne(pe=>!pe)},label:g(k?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},k?e.createElement(ie.Z,null):e.createElement(u.Z,null)),required:!0}),e.createElement(w.X,{onValueChange:de=>{oe({target:{value:de,name:"rememberMe"}})},value:H.rememberMe,"aria-label":"rememberMe",name:"rememberMe"},g({id:"Auth.form.rememberMe.label",defaultMessage:"Remember me"})),e.createElement(te.z,{fullWidth:!0,type:"submit"},g({id:"Auth.form.button.login",defaultMessage:"Login"}))))),N),e.createElement(A.k,{justifyContent:"center"},e.createElement(M.x,{paddingTop:4},e.createElement(F.rU,{to:"/auth/forgot-password"},g({id:"Auth.link.forgot-password",defaultMessage:"Forgot your password?"})))))};S.defaultProps={children:null,onSubmit(){}},S.propTypes={children:z().node,onSubmit:z().func,schema:z().shape({type:z().string.isRequired}).isRequired};const I=S},35500:(Q,y,t)=>{t.r(y),t.d(y,{AuthPage:()=>he});var e=t(67294),a=t(57993),R=t(52861),M=t(68929),v=t.n(M),A=t(27361),w=t.n(A),te=t(57557),F=t.n(te),ie=t(45697),u=t.n(ie),j=t(16550),ae=t(46061),z=t(41995),G=t(80902),se=t(26779),i=t(50745),q=t(31640);const J=s=>e.createElement(i.ZP,null,e.createElement(q.Z,{...s}));J.defaultProps={onSubmit:s=>s.preventDefault()},J.propTypes={onSubmit:u().func};var n=t(87561),S=t(185),I=t(41580),T=t(75515),L=t(11047),N=t(16364),k=t(29728),ne=t(41054),g=t(86896),H=t(68890);const b=({onSubmit:s,schema:h})=>{const{formatMessage:o}=(0,g.Z)();return e.createElement(i.ZP,null,e.createElement(S.o,null,e.createElement(i.bU,null,e.createElement(ne.J9,{enableReinitialize:!0,initialValues:{email:""},onSubmit:s,validationSchema:h,validateOnChange:!1},({values:X,errors:U,handleChange:Y})=>e.createElement(a.l0,{noValidate:!0},e.createElement(i.sg,null,e.createElement(H.Z,null),e.createElement(I.x,{paddingTop:6,paddingBottom:7},e.createElement(T.Z,{as:"h1",variant:"alpha"},o({id:"Auth.form.button.password-recovery",defaultMessage:"Password Recovery"}))),U.errorMessage&&e.createElement(T.Z,{id:"global-form-error",role:"alert",tabIndex:-1,textColor:"danger600"},o({id:U.errorMessage,defaultMessage:"An error occurred"}))),e.createElement(L.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(N.o,{error:U.email?o({id:U.email,defaultMessage:"This email is invalid."}):"",value:X.email,onChange:Y,label:o({id:"Auth.form.email.label",defaultMessage:"Email"}),placeholder:o({id:"Auth.form.email.placeholder",defaultMessage:"kai@doe.com"}),name:"email",required:!0}),e.createElement(k.z,{type:"submit",fullWidth:!0},o({id:"Auth.form.button.forgot-password",defaultMessage:"Send Email"})))))),e.createElement(L.k,{justifyContent:"center"},e.createElement(I.x,{paddingTop:4},e.createElement(a.rU,{to:"/auth/login"},o({id:"Auth.link.ready",defaultMessage:"Ready to sign in?"}))))))};b.defaultProps={onSubmit:s=>s.preventDefault()},b.propTypes={onSubmit:u().func,schema:u().shape({type:u().string.isRequired}).isRequired};const oe=b,pe=()=>{const{formatMessage:s}=(0,g.Z)();return e.createElement(i.ZP,null,e.createElement(S.o,null,e.createElement(i.bU,null,e.createElement(i.sg,null,e.createElement(H.Z,null),e.createElement(I.x,{paddingTop:6,paddingBottom:7},e.createElement(T.Z,{as:"h1",variant:"alpha"},s({id:"app.containers.AuthPage.ForgotPasswordSuccess.title",defaultMessage:"Email sent"}))),e.createElement(T.Z,null,s({id:"app.containers.AuthPage.ForgotPasswordSuccess.text.email",defaultMessage:"It can take a few minutes to receive your password recovery link."})),e.createElement(I.x,{paddingTop:4},e.createElement(T.Z,null,s({id:"app.containers.AuthPage.ForgotPasswordSuccess.text.contact-admin",defaultMessage:"If you do not receive this link, please contact your administrator."}))))),e.createElement(L.k,{justifyContent:"center"},e.createElement(I.x,{paddingTop:4},e.createElement(a.rU,{to:"/auth/login"},s({id:"Auth.link.signin",defaultMessage:"Sign in"}))))))},Se=()=>{const{formatMessage:s}=(0,g.Z)(),o=(0,a.aM)().get("info")||s({id:"Auth.components.Oops.text",defaultMessage:"Your account has been suspended."});return e.createElement(i.ZP,null,e.createElement(S.o,null,e.createElement(i.bU,null,e.createElement(i.sg,null,e.createElement(H.Z,null),e.createElement(I.x,{paddingTop:6,paddingBottom:7},e.createElement(T.Z,{as:"h1",variant:"alpha"},s({id:"Auth.components.Oops.title",defaultMessage:"Oops..."}))),e.createElement(T.Z,null,o),e.createElement(I.x,{paddingTop:4},e.createElement(T.Z,null,s({id:"Auth.components.Oops.text.admin",defaultMessage:"If this is a mistake, please contact your administrator."}))))),e.createElement(L.k,{justifyContent:"center"},e.createElement(I.x,{paddingTop:4},e.createElement(a.rU,{to:"/auth/login"},s({id:"Auth.link.signin",defaultMessage:"Sign in"}))))))};var Le=t(11276),ye=t(67819),Ue=t(36213),me=t(8934),ce=t(94123),fe=t(88972),ue=t(91458);const Te=fe.ZP.a`
  color: ${({theme:s})=>s.colors.primary600};
`,Ae=(0,fe.ZP)(N.o)`
  ::-ms-reveal {
    display: none;
  }
`,ge=({authType:s,fieldsToDisable:h,noSignin:o,onSubmit:X,schema:U})=>{const Y=(0,a.lm)(),{push:E}=(0,j.k6)(),[d,x]=(0,e.useState)(!1),[B,W]=(0,e.useState)(!1),[V,Pe]=(0,e.useState)(0),[re,_]=(0,e.useState)({}),{trackUsage:De}=(0,a.rS)(),{formatMessage:r}=(0,g.Z)(),Me=(0,a.aM)(),{formatAPIError:ve}=(0,a.So)(),{get:le}=(0,a.kY)(),$=Me.get("registrationToken");(0,e.useEffect)(()=>{$&&(async()=>{try{const{data:{data:l}}=await le("/admin/registration-info",{params:{registrationToken:$}});l&&_(l)}catch(l){const p=ve(l);Y({type:"warning",message:p}),E(`/auth/oops?info=${encodeURIComponent(p)}`)}})()},[$]);function we(C){return Object.entries(C).reduce((l,[p,D])=>{let O=D;return!["password","confirmPassword"].includes(p)&&typeof D=="string"&&(O=O.trim(),p==="lastname"&&(O=O||null)),l[p]=O,l},{})}return e.createElement(i.ZP,null,e.createElement(i.bU,null,e.createElement(ne.J9,{enableReinitialize:!0,initialValues:{firstname:re.firstname||"",lastname:re.lastname||"",email:re.email||"",password:"",confirmPassword:"",registrationToken:$||void 0,news:!1},onSubmit:async(C,l)=>{const p=we(C);try{await U.validate(p,{abortEarly:!1}),V>0&&s==="register-admin"&&De("didSubmitWithErrorsFirstAdmin",{count:V.toString()}),X($?{userInfo:F()(p,["registrationToken"]),registrationToken:$}:p,l)}catch(D){const O=(0,a.CJ)(D);Pe(V+1),l.setErrors(O)}},validateOnChange:!1},({values:C,errors:l,handleChange:p})=>e.createElement(a.l0,{noValidate:!0},e.createElement(S.o,null,e.createElement(L.k,{direction:"column",alignItems:"center",gap:3},e.createElement(H.Z,null),e.createElement(T.Z,{as:"h1",variant:"alpha",textAlign:"center"},r({id:"Auth.form.welcome.title",defaultMessage:"Welcome to Strapi!"})),e.createElement(T.Z,{variant:"epsilon",textColor:"neutral600",textAlign:"center"},r({id:"Auth.form.register.subtitle",defaultMessage:"Credentials are only used to authenticate in Strapi. All saved data will be stored in your database."}))),e.createElement(L.k,{direction:"column",alignItems:"stretch",gap:6,marginTop:7},e.createElement(Le.r,{gap:4},e.createElement(ye.P,{col:6},e.createElement(N.o,{name:"firstname",required:!0,value:C.firstname,error:l.firstname?r(l.firstname):void 0,onChange:p,label:r({id:"Auth.form.firstname.label",defaultMessage:"Firstname"})})),e.createElement(ye.P,{col:6},e.createElement(N.o,{name:"lastname",value:C.lastname,onChange:p,label:r({id:"Auth.form.lastname.label",defaultMessage:"Lastname"})}))),e.createElement(N.o,{name:"email",disabled:h.includes("email"),value:C.email,onChange:p,error:l.email?r(l.email):void 0,required:!0,label:r({id:"Auth.form.email.label",defaultMessage:"Email"}),type:"email"}),e.createElement(Ae,{name:"password",onChange:p,value:C.password,error:l.password?r(l.password):void 0,endAction:e.createElement(ue.Z,{onClick:D=>{D.preventDefault(),x(O=>!O)},label:r(d?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},d?e.createElement(me.Z,null):e.createElement(ce.Z,null)),hint:r({id:"Auth.form.password.hint",defaultMessage:"Must be at least 8 characters, 1 uppercase, 1 lowercase & 1 number"}),required:!0,label:r({id:"global.password",defaultMessage:"Password"}),type:d?"text":"password"}),e.createElement(Ae,{name:"confirmPassword",onChange:p,value:C.confirmPassword,error:l.confirmPassword?r(l.confirmPassword):void 0,endAction:e.createElement(ue.Z,{onClick:D=>{D.preventDefault(),W(O=>!O)},label:r(B?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},B?e.createElement(me.Z,null):e.createElement(ce.Z,null)),required:!0,label:r({id:"Auth.form.confirmPassword.label",defaultMessage:"Confirm Password"}),type:B?"text":"password"}),e.createElement(Ue.X,{onValueChange:D=>{p({target:{value:D,name:"news"}})},value:C.news,name:"news","aria-label":"news"},r({id:"Auth.form.register.news.label",defaultMessage:"Keep me updated about new features & upcoming improvements (by doing this you accept the {terms} and the {policy})."},{terms:e.createElement(Te,{target:"_blank",href:"https://strapi.io/terms",rel:"noreferrer"},r({id:"Auth.privacy-policy-agreement.terms",defaultMessage:"terms"})),policy:e.createElement(Te,{target:"_blank",href:"https://strapi.io/privacy",rel:"noreferrer"},r({id:"Auth.privacy-policy-agreement.policy",defaultMessage:"policy"}))})),e.createElement(k.z,{fullWidth:!0,size:"L",type:"submit"},r({id:"Auth.form.button.register",defaultMessage:"Let's start"})))))),!o&&e.createElement(I.x,{paddingTop:4},e.createElement(L.k,{justifyContent:"center"},e.createElement(a.rU,{label:"Auth.link.signin",to:"/auth/login"},r({id:"Auth.link.signin.account",defaultMessage:"Already have an account?"}))))))};ge.defaultProps={fieldsToDisable:[],noSignin:!1,onSubmit:s=>s.preventDefault()},ge.propTypes={authType:u().string.isRequired,fieldsToDisable:u().array,noSignin:u().bool,onSubmit:u().func,schema:u().shape({validate:u().func.isRequired,type:u().string.isRequired}).isRequired};const Ie=ge,Ce=(0,fe.ZP)(N.o)`
  ::-ms-reveal {
    display: none;
  }
`,Ee=({onSubmit:s,schema:h})=>{const[o,X]=(0,e.useState)(!1),[U,Y]=(0,e.useState)(!1),{formatMessage:E}=(0,g.Z)();return e.createElement(i.ZP,null,e.createElement(S.o,null,e.createElement(i.bU,null,e.createElement(ne.J9,{enableReinitialize:!0,initialValues:{password:"",confirmPassword:""},onSubmit:s,validationSchema:h,validateOnChange:!1},({values:d,errors:x,handleChange:B})=>e.createElement(a.l0,{noValidate:!0},e.createElement(i.sg,null,e.createElement(H.Z,null),e.createElement(I.x,{paddingTop:6,paddingBottom:7},e.createElement(T.Z,{as:"h1",variant:"alpha"},E({id:"global.reset-password",defaultMessage:"Reset password"}))),x.errorMessage&&e.createElement(T.Z,{id:"global-form-error",role:"alert",tabIndex:-1,textColor:"danger600"},E({id:x.errorMessage,defaultMessage:"An error occurred"}))),e.createElement(L.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(Ce,{name:"password",onChange:B,value:d.password,error:x.password?E({id:x.password,defaultMessage:"This field is required."}):void 0,endAction:e.createElement(ue.Z,{onClick:W=>{W.preventDefault(),X(V=>!V)},label:E(o?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},o?e.createElement(me.Z,null):e.createElement(ce.Z,null)),hint:E({id:"Auth.form.password.hint",defaultMessage:"Password must contain at least 8 characters, 1 uppercase, 1 lowercase and 1 number"}),required:!0,label:E({id:"global.password",defaultMessage:"Password"}),type:o?"text":"password"}),e.createElement(Ce,{name:"confirmPassword",onChange:B,value:d.confirmPassword,error:x.confirmPassword?E({id:x.confirmPassword,defaultMessage:"This value is required."}):void 0,endAction:e.createElement(ue.Z,{onClick:W=>{W.preventDefault(),Y(V=>!V)},label:E(o?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},U?e.createElement(me.Z,null):e.createElement(ce.Z,null)),required:!0,label:E({id:"Auth.form.confirmPassword.label",defaultMessage:"Confirm Password"}),type:U?"text":"password"}),e.createElement(k.z,{fullwidth:!0,type:"submit"},E({id:"global.change-password",defaultMessage:"Change password"})))))),e.createElement(L.k,{justifyContent:"center"},e.createElement(I.x,{paddingTop:4},e.createElement(a.rU,{to:"/auth/login"},E({id:"Auth.link.ready",defaultMessage:"Ready to sign in?"}))))))};Ee.defaultProps={onSubmit:s=>s.preventDefault()},Ee.propTypes={onSubmit:u().func,schema:u().shape({type:u().string.isRequired}).isRequired};const xe=Ee,Oe={"forgot-password":{Component:oe,endPoint:"forgot-password",fieldsToDisable:[],fieldsToOmit:[],schema:n.Ry().shape({email:n.Z_().email(a.I0.email).required(a.I0.required)}),inputsPrefix:""},"forgot-password-success":{Component:pe,endPoint:"",fieldsToDisable:[],fieldsToOmit:[],schema:null,inputsPrefix:""},login:{endPoint:"login",fieldsToDisable:[],fieldsToOmit:["rememberMe"],schema:n.Ry().shape({email:n.Z_().email(a.I0.email).required(a.I0.required),password:n.Z_().required(a.I0.required),rememberMe:n.Xg().nullable()}),inputsPrefix:""},oops:{Component:Se,endPoint:null,fieldsToDisable:[],fieldsToOmit:[],schema:null,inputsPrefix:""},register:{Component:Ie,endPoint:"register",fieldsToDisable:["email"],fieldsToOmit:["userInfo.confirmPassword","userInfo.news","userInfo.email"],schema:n.Ry().shape({firstname:n.Z_().trim().required(a.I0.required),lastname:n.Z_().nullable(),password:n.Z_().min(8,a.I0.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number").required(a.I0.required),confirmPassword:n.Z_().oneOf([n.iH("password"),null],"components.Input.error.password.noMatch").required(a.I0.required),registrationToken:n.Z_().required(a.I0.required)}),inputsPrefix:"userInfo."},"register-admin":{Component:Ie,endPoint:"register-admin",noSignin:!0,fieldsToDisable:[],fieldsToOmit:["confirmPassword","news"],schema:n.Ry().shape({firstname:n.Z_().trim().required(a.I0.required),lastname:n.Z_().nullable(),password:n.Z_().min(8,a.I0.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number").required(a.I0.required),email:n.Z_().email(a.I0.email).strict().lowercase(a.I0.lowercase).required(a.I0.required),confirmPassword:n.Z_().oneOf([n.iH("password"),null],"components.Input.error.password.noMatch").required(a.I0.required)}),inputsPrefix:""},"reset-password":{Component:xe,endPoint:"reset-password",fieldsToDisable:[],fieldsToOmit:["confirmPassword"],schema:n.Ry().shape({password:n.Z_().min(8,a.I0.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number").required(a.I0.required),confirmPassword:n.Z_().oneOf([n.iH("password"),null],"components.Input.error.password.noMatch").required(a.I0.required)})}},be=s=>s;var Be=t(18172),We=t(36968),Ke=t.n(We);const Re={formErrors:{},modifiedData:{},requestError:null},Fe=(s,h)=>(0,Be.ZP)(s,o=>{switch(h.type){case"ON_CHANGE":{Ke()(o.modifiedData,h.keys.split("."),h.value);break}case"RESET_PROPS":return Re;case"SET_DATA":{o.modifiedData=h.data;break}case"SET_ERRORS":{o.formErrors=h.errors;break}case"SET_REQUEST_ERROR":{o.requestError={errorMessage:h.errorMessage,errorStatus:h.errorStatus};break}default:return o}}),he=({hasAdmin:s,setHasAdmin:h})=>{const{push:o,location:{search:X}}=(0,j.k6)(),{changeLocale:U}=(0,z.Z)(),{setSkipped:Y}=(0,a.c1)(),{trackUsage:E}=(0,a.rS)(),{params:{authType:d}}=(0,j.$B)("/auth/:authType"),x=(0,a.aM)(),B=(0,G.c)(J,async()=>(await t.e(6394).then(t.bind(t,76394))).LoginEE),W=(0,G.c)(Oe,async()=>(await t.e(2501).then(t.bind(t,52501))).FORMS,{combine(m,f){return{...m,...f}},defaultValue:Oe}),[{formErrors:V,modifiedData:Pe,requestError:re},_]=(0,e.useReducer)(Fe,Re,be),r=R.default.CancelToken.source(),{endPoint:Me,fieldsToDisable:ve,fieldsToOmit:le,inputsPrefix:$,schema:we,...C}=W?.[d]??{};(0,e.useEffect)(()=>()=>{r.cancel("Component unmounted")},[]);const{post:l}=(0,a.kY)();(0,e.useEffect)(()=>{_({type:"RESET_PROPS"})},[d]);const p=({target:{name:m,value:f}})=>{_({type:"ON_CHANGE",keys:m,value:f})},D=async(m,{setSubmitting:f,setErrors:Z})=>{f(!0);const K=F()(m,le),c=`/admin/${Me}`;d==="login"&&await je(m,c,{setSubmitting:f,setErrors:Z}),(d==="register"||d==="register-admin")&&await ze(m,c,{setSubmitting:f,setErrors:Z}),d==="forgot-password"&&await O(K,c,{setSubmitting:f,setErrors:Z}),d==="reset-password"&&await He(K,c,{setSubmitting:f,setErrors:Z})},O=async(m,f,{setSubmitting:Z,setErrors:K})=>{try{await l(f,m,{cancelToken:r.token}),o("/auth/forgot-password-success")}catch(c){console.error(c),K({errorMessage:"notification.error"})}finally{Z(!1)}},je=async(m,f,{setSubmitting:Z,setErrors:K})=>{try{const{data:{data:{token:c,user:P}}}=await l(f,F()(m,le),{cancelToken:r.token});P.preferedLanguage&&U(P.preferedLanguage),a.I8.setToken(c,m.rememberMe),a.I8.setUserInfo(P,m.rememberMe),Ze()}catch(c){if(c.response){const P=w()(c,["response","data","error","message"],"Something went wrong");if(v()(P).toLowerCase()==="usernotactive"){o("/auth/oops"),_({type:"RESET_PROPS"});return}K({errorMessage:P})}}finally{Z(!1)}},ze=async(m,f,{setSubmitting:Z,setErrors:K})=>{try{E("willCreateFirstAdmin");const{data:{data:{token:c,user:P}}}=await l(f,F()(m,le),{cancelToken:r.token});a.I8.setToken(c,!1),a.I8.setUserInfo(P,!1),Z(!1),h(!0);const{roles:ee}=P;if(ee&&ee.find(({code:Ne})=>Ne==="strapi-super-admin")&&(ae.ZP.setSkipped(!1),Y(!1),E("didLaunchGuidedtour")),d==="register"&&m.userInfo.news===!0||d==="register-admin"&&m.news===!0){o({pathname:"/usecase",search:`?hasAdmin=${s}`});return}Ze()}catch(c){if(E("didNotCreateFirstAdmin"),c.response){const{data:P}=c.response,ee=(0,se.I)(P);K({apiErrors:ee})}}},He=async(m,f,{setErrors:Z,setSubmitting:K})=>{try{const{data:{data:{token:c,user:P}}}=await l(f,{...m,resetPasswordToken:x.get("code")},{cancelToken:r.token});a.I8.setToken(c,!1),a.I8.setUserInfo(P,!1),o("/")}catch(c){if(c.response){const P=w()(c,["response","data","message"],"Something went wrong"),ee=w()(c,["response","data","statusCode"],400);_({type:"SET_REQUEST_ERROR",errorMessage:P,errorStatus:ee}),Z({errorMessage:P})}}finally{K(!1)}},Ze=()=>{if(d==="login"){const m=x.get("redirectTo"),f=m?decodeURIComponent(m):"/";o(f)}else o("/")};if(!W[d]||s&&d==="register-admin"||a.I8.getToken())return e.createElement(j.l_,{to:"/"});if(!s&&d!=="register-admin")return e.createElement(j.l_,{to:{pathname:"/auth/register-admin",search:X}});if(B&&(W.login.Component=B),!B)return null;const{Component:Ve}=W?.[d]??{};return e.createElement(Ve,{...C,authType:d,fieldsToDisable:ve,formErrors:V,inputsPrefix:$,modifiedData:Pe,onChange:p,onSubmit:D,requestError:re,schema:we})};he.defaultProps={hasAdmin:!1},he.propTypes={hasAdmin:u().bool,setHasAdmin:u().func.isRequired}},185:(Q,y,t)=>{t.d(y,{o:()=>v});var e=t(85893),a=t(88972),R=t(41580);const M=(0,a.ZP)(R.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,v=({labelledBy:A="main-content-title",...w})=>(0,e.jsx)(M,{"aria-labelledby":A,as:"main",id:"main-content",tabIndex:-1,...w})}}]);
